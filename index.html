<!-- // This is a simple To-Do List application built with HTML, CSS, and JavaScript. make this mobile responsive and update the styles to look modern and clean. -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <meta name="theme-color" content="#2575fc" />
  <title>To-Do List</title>

  <style>
    :root {
      --bg-start: #6a11cb;
      --bg-end:   #2575fc;
      --card-bg:  rgba(255,255,255,0.9);
      --primary:  #28a745;
      --info:     #17a2b8;
      --danger:   #dc3545;
      --text:     #333;
      --light:    #666;
    }

    * { box-sizing: border-box; margin:0; padding:0; }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      padding: 20px;
    }

    .container {
      background: var(--card-bg);
      border-radius: 12px;
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
      width: 100%; max-width: 600px;
      padding: 30px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #333;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
    }

    form {
      display: flex; gap: 10px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    form input[type="text"],
    form input[type="date"] {
      flex: 1 1 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
    }

    form button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: background .3s;
      width: 100%;
    }

    section + section {
      margin-top: 30px;
    }

    h2 {
      font-size: 1.2rem;
      margin-bottom: 12px;
      color: var(--text);
      display: flex; align-items: center; gap: 8px;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: white;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-left: 6px solid var(--info);
      transition: transform .2s, box-shadow .2s;
    }

    li:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }

    li.task-completed {
      border-left-color: var(--primary);
      opacity: 0.7;
    }

    .task-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .task-info {
      display: flex; flex-direction: column; gap: 4px;
    }

    .task-text {
      color: var(--text);
      font-weight: 500;
      font-size: 1rem;
    }

    .task-date {
      color: var(--light);
      font-size: 0.85rem;
    }

    .actions {
      display: flex; gap: 8px;
      margin-top: 8px;
    }

    .actions button {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      color: var(--light);
      transition: color .2s;
    }

    .actions button:hover {
      color: var(--text);
    }

    .edit-mode input {
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-right: 6px;
    }

    .edit-mode button {
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 4px;
      color: white;
    }

    .save-btn { background: var(--info); }
    .cancel-btn { background: var(--danger); }

    @media (min-width: 480px) {
      form {
        flex-wrap: nowrap;
      }

      form input[type="text"],
      form input[type="date"] {
        flex: 1;
      }

      form button {
        width: auto;
      }

      li {
        flex-direction: row;
        align-items: center;
      }

      .task-info {
        flex: 1;
      }

      .actions {
        margin-top: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìù Sangamesh To-Do</h1>

    <form id="taskForm">
      <input type="text" id="txt" placeholder="What‚Äôs next?" required>
      <input type="date" id="dt">
      <button>Add</button>
    </form>

    <section>
      <h2>üìÖ Today‚Äôs Tasks</h2>
      <ul id="today"></ul>
    </section>

    <section>
      <h2>‚è≥ All-Time Pending</h2>
      <ul id="pending"></ul>
    </section>
  </div>
  <script>
  (function(){
    const KEY = 'todo_tasks';
    const form = document.getElementById('taskForm');
    const txt  = document.getElementById('txt');
    const dt   = document.getElementById('dt');
    const todayUL   = document.getElementById('today');
    const pendingUL = document.getElementById('pending');

    function load(){ try { return JSON.parse(localStorage.getItem(KEY))||[] } catch { return [] } }
    function save(arr){ localStorage.setItem(KEY, JSON.stringify(arr)) }
    function genId(){ return Date.now().toString(36)+Math.random().toString(36).slice(2) }
    function fmt(d){ 
      const D=new Date(d), m=String(D.getMonth()+1).padStart(2,'0'),
            dd=String(D.getDate()).padStart(2,'0');
      return `${D.getFullYear()}-${m}-${dd}`;
    }
    function sortFn(a,b){
      if(a.completed!==b.completed) return a.completed - b.completed;
      if(a.due!==b.due) return a.due < b.due ? -1 :1;
      return a.created - b.created;
    }

    function render(){
      const tasks = load().sort(sortFn),
            today = fmt(new Date());
      todayUL.innerHTML = '';
      pendingUL.innerHTML = '';

      tasks.forEach(t=>{
        const ul = t.due === today ? todayUL : pendingUL;
        addRow(t, ul);
      });
    }

    function addRow(t, ul){
      const li = document.createElement('li');
      li.dataset.id = t.id;
      if(t.completed) li.classList.add('task-completed');

      const cb = document.createElement('input');
      cb.type = 'checkbox';
      cb.className = 'task-checkbox';
      cb.checked = t.completed;
      cb.onchange = ()=> toggle(t.id, cb.checked);

      const info = document.createElement('div');
      info.className = 'task-info';
      info.innerHTML = `<span class="task-text">${t.text}</span>
                        <span class="task-date">${t.due}</span>`;

      const act = document.createElement('div');
      act.className = 'actions';

      const edit = document.createElement('button');
      edit.innerText = '‚úèÔ∏è';
      edit.onclick = ()=> startEdit(t, li);

      const del = document.createElement('button');
      del.innerText = 'üóëÔ∏è';
      del.onclick = ()=> {
        if(confirm('Delete this task?')) deleteTask(t.id);
      };

      act.append(edit, del);
      li.append(cb, info, act);
      ul.appendChild(li);
    }

    form.onsubmit = e=>{
      e.preventDefault();
      const text = txt.value.trim();
      if(!text) return;
      const due = dt.value || fmt(new Date());
      const tasks = load();
      tasks.push({ id:genId(), text, due, created:Date.now(), completed:false });
      save(tasks);
      form.reset();
      render();
    };

    function toggle(id, done){
      const tasks = load();
      tasks.find(x=>x.id===id).completed = done;
      save(tasks);
      render();
    }

    function deleteTask(id){
      save(load().filter(x=>x.id!==id));
      render();
    }

    function startEdit(task, li){
      li.innerHTML = '';
      li.classList.add('edit-mode');

      const textIn = document.createElement('input');
      textIn.type  = 'text';
      textIn.value = task.text;

      const dateIn = document.createElement('input');
      dateIn.type  = 'date';
      dateIn.value = task.due;

      const saveBtn = document.createElement('button');
      saveBtn.className = 'save-btn';
      saveBtn.textContent = 'Save';
      saveBtn.onclick = ()=>{
        const nt = textIn.value.trim(), nd = dateIn.value;
        if(!nt||!nd) return alert('Both fields required');
        const tasks = load();
        const idx = tasks.findIndex(x=>x.id===task.id);
        tasks[idx].text = nt; tasks[idx].due = nd;
        save(tasks); render();
      };

      const cancelBtn = document.createElement('button');
      cancelBtn.className = 'cancel-btn';
      cancelBtn.textContent = 'Cancel';
      cancelBtn.onclick = render;

      li.append(textIn, dateIn, saveBtn, cancelBtn);
    }

    render();
  })();
  /** if ('serviceWorker' in navigator) {
    navigator.serviceWorker
      .register('service-worker.js')
      .then(() => console.log('SW registered'))
      .catch(err => console.error('SW registration failed:', err));
  } **/
  </script>
</body>
</html>
